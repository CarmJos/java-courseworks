# 实训项目：学生管理系统

## 1. 项目简介

本项目是一个基于 Java 实现的命令行学生管理系统。它提供了一个简洁的交互界面，支持用户注册、登录，并对学生信息进行增、删、改、查等基本操作。

项目旨在演示 Java 在控制台应用程序开发中的应用，整合了数据库操作、密码加密、数据校验等常用功能，结构清晰，适合初学者学习和实践。

![](img/login.png)
![](img/reg.png)
![](img/list.png)

## 1、开发环境

- 操作系统：Ubuntu 24.04 LTS
- 开发工具：Intellij IDEA Ultimate 25.3
- Java版本：Temurin 21.0.7
- 数据库：MariaDB 10.5.10, h2-database(本地测试)
- 其他工具：DataGrip (数据库工具）
-

## 2、需求分析

### 2.1 功能需求

#### 用户管理：

**登陆**

- 实现已注册用户使用用户名配合密码登录系统。
- 登录时需同时输入动态生成的数字验证码，，以防止自动化攻击。
- 登录成功后，系统根据用户角色跳转至对应的主功能页面。
  **注册**
- 用户名限制为4-16位，只能包含字母、数字和下划线，且必须唯一。
- 密码强度要求最少8位，必须包含大写字母、小写字母、数字和特殊字符中的至少三种。同时利用 BCrypt 加密存储。
- 身份证号码进行18位格式校验，并验证其校验位的合法性。手机号需要通过国内手机号可用性校验。

#### 学生管理：

**添加学生**
(1)支持通过表单单条录入导入学生信息。必填字段包括学号、姓名、性别、地址，其中学号需进行唯一性校验。

**删除学生**
(1)支持通过学号或选择对应条目删除学生。

**修改学生**
(1)支持选中学生并修改学生数据。

**查询**
(1)支持通过学号查询学生信息。
(2)支持通过学生姓名进行模糊查询。

**展示**
(1)支持分页展示学生数据。
(2)支持翻页。

**导出**
(1)支持导出所有学生数据为csv。

### 2.2 数据需求

用户数据：用户名、密码（加密存储）、身份证号码、手机号。

学生数据：学号、姓名、年龄、地址。

## 3、系统实现

### 3.1 系统架构设计

### 3.2 数据库设计

**user表设计**

- username: VARCHAR(36) NOT NULL PRIMARY KEY
- hashed_password: TEXT NOT NULL
- cid: CHAR(18) NOT NULL
- phone: CHAR(11) NOT NULL
- create_time: DATETIME NOT NULL

**student表设计**
- id: VARCHAR(36) NOT NULL PRIMARY KEY
- name: VARCHAR(32) NOT NULL
- age: TINYINT UNSIGNED NOT NULL DEFAULT 0
- address: TEXT NOT NULL
- create_time: DATETIME NOT NULL

## 4、系统实现

### 4.1 开发过程

- 启动与初始化：在Main.java完成应用入口，调用Database建立连接，并执行DataTables.initializeTables()
  ，用SQLManager.createTable与枚举定义的列确保USERS与STUDENTS表存在。DataTables枚举集中表结构，便于维护与扩展。
- 实体与校验：data包承载User与Student字段模型，utils中的Validators用于用户名、身份证、手机号、年龄等合法性校验，BCrypt负责密码加盐哈希，确保注册与登录的安全基础。
  -控制器职责：UserController处理注册与登录流程，顺序为校验输入→哈希密码→写入USERS表→返回结果与错误提示；StudentController负责增删改查与分页查询，将视图的请求转换成数据库操作参数（limit/offset、排序、模糊条件）。
  -视图交互：在MainView主页面加入“每页数量”的下拉框（10、20、50、100、全部），默认可设为50；变更选择时触发刷新事件，委托控制器按选择值执行查询。若“全部”则约定limit为0或-1表示不分页，由控制器分支处理，避免一次性加载过大数据时卡顿（可在控制器内做上限保护或分批加载）。
- 查询与导出：分页查询遵循“当前页码×每页数量”为offset的计算，返回数据后刷新表格模型。导出功能遵循当前筛选范围，支持“当前页导出”与“全部导出”，生成CSV并落盘，异常统一提示。
- 数据库与异常：Database统一提供SQLManager实例，所有DAO式调用通过它完成。对SQL异常、唯一约束冲突（如用户名重复）进行捕获与用户提示；在控制器内集中处理错误，视图只负责展示。

### 4.2 关键技术

#### JDBC技术与连接池

本项目利用我个人开发的 EasySQL 数据库工具，配合 beeCP 连接池实现基于JDBC的数据库链接和操作。

#### 现代化SWing

搭配 flatLaf，实现现代化SwingUI的快速开发与美化。

### 4.3 核心功能实现

#### 用户注册、登录、忘记密码

- 注册：在UserController接收表单，用Validators校验用户名/手机号/身份证，BCrypt加盐哈希密码，检查重名后写入USERS表并记录创建时间。
- 登录：校验用户名存在，读取哈希并用BCrypt.check比对密码，成功后建立会话或发放简单的登录状态（桌面应用可保存在内存），记录最后登录时间。
- 忘记密码：提供身份核验（如用户名+身份证后4位），通过验证后生成一次性重置令牌或直接允许设置新密码；新密码用BCrypt哈希更新USERS表，并提示成功。

#### 学生增删改查

- **数据模型**：data包定义Student实体，字段与数据库表保持一致。
- **数据访问**：通过database层的Database提供的SQLManager执行插入、更新、删除、查询，DataTables集中建表与列定义。
- **业务控制**：StudentController封装增删改查方法，如list(offset, limit)分页查询、find(id)精确查询、
  findByName(keyword)模糊查询、update(student)保存新增或修改、remove(id)删除。
- **视图交互**：MainView与对话框收集输入并调用控制器；分页通过pageSize与currentPage计算offset/limit刷新表格；
  增改用表单对话框返回Student后调用update，删除触发确认后调用remove，查询结果以弹窗列表展示。
- **异常与提示**：统一捕获SQL异常与校验错误，视图负责消息提示。

## 总结

本次实训完成了一套简单的学生信息管理系统，实现了用户注册登录、学生信息的增删改查、分页展示与数据导出等核心功能。
项目严格按照MVC分层架构进行开发，各模块职责清晰，代码结构较为规范，达到了基础业务闭环的预期目标。

在技术层面，本次实训内容均为Java SE领域的成熟技术，包括Swing GUI、JDBC数据库操作以及基础的密码加密与数据校验。
虽无复杂技术难点，但此过程让我系统性地重温了桌面应用开发的完整流程，从界面事件响应到数据持久化的链路贯通。
最大的技术收获并非新知，而是在教学语境下，对MVC模式在桌面端的落地、连接池的简易管理以及面向对象设计在小型项目中的实践，
进行了一次严谨的还原与审视。

实训时间和精力实在有限，本次仅实现了一些基本的功能和实例，后续可以聚焦更多复杂场景下的功能。
在业务侧可以引入service层承接组合逻辑与事务控制，DAO层细化查询与批处理，针对姓名、
学号等高频条件添加索引并优化分页为基于游标的滚动窗口， 避免大页跳转带来的性能抖动。
安全侧完善角色与权限模型，增加登录失败次数与时间的审计、验证码动态策略与口令复杂度校验等，
并在桌面端维持会话的同时记录操作日志。

本次整体实践，强化了我个人工程化思维与质量意识，其价值不在于挑战技术深度，而在于以工程化的严谨态度去对待每一个基础环节。
它促使我反思在以往快速迭代中可能被忽略的细节规范，也让我从“教学实现”的视角，重新理解了许多习以为常的设计原则的初衷。
这是一种将职业经验与学院派规范相融合的独特体验，对夯实基础、温故知新颇具意义。
未来在教学项目中， 可适当引入简易的持续集成流程，以培养学生初步的工程化意识。